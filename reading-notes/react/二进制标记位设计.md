## 二进制设计的原理和意义

- **位标志设计**：每个模式使用一个独立的二进制位来表示，这样可以通过位操作（如按位与、按位或）来高效地检查和组合多个模式。
- **组合和检查**：通过按位或操作，可以组合多个模式。例如，`ConcurrentMode | ProfileMode` 可以同时启用并发模式和性能分析模式。通过按位与操作，可以检查某个模式是否被启用。
- **内存效率**：使用一个整数来存储多个布尔标志比使用多个独立的布尔变量更节省内存。
- **灵活性**：这种设计允许轻松地添加新的模式，只需为新模式分配一个未使用的位即可。

### 组合和检查

按位或（`|`）操作符在二进制运算中用于将两个数的每个位进行比较，如果任意一个数的某个位为1，则结果的该位为1。这种特性使得按位或操作非常适合用于组合多个标志位，从而同时启用多个模式。

### 为什么按位或可以同时启用多个模式

1. **二进制表示**：
   - 每个模式用一个独立的二进制位表示。例如：
     - `ConcurrentMode`：`0b0000001`
     - `ProfileMode`：`0b0000010`

2. **按位或操作**：
   - 当你对两个模式进行按位或操作时，结果的每个位是两个操作数对应位的逻辑或。
   - 例如，`ConcurrentMode | ProfileMode` 的结果是：
     - `0b0000001` (ConcurrentMode)
     - `0b0000010` (ProfileMode)
     - 结果：`0b0000011`

3. **结果解释**：
   - 结果 `0b0000011` 表示同时启用了 `ConcurrentMode` 和 `ProfileMode`，因为结果的第一位和第二位都是1。

### 检查某个模式是否被启用

通过按位与（`&`）操作，可以检查某个模式是否被启用：

1. **按位与操作**：
   - 按位与操作符用于将两个数的每个位进行比较，只有当两个数的某个位都为1时，结果的该位才为1。
   - 例如，要检查 `ConcurrentMode` 是否被启用，可以使用：
     - `(currentMode & ConcurrentMode) !== 0`

2. **示例**：
   - 假设 `currentMode` 是 `0b0000011`（表示同时启用了 `ConcurrentMode` 和 `ProfileMode`）。
   - 检查 `ConcurrentMode`：
     - `0b0000011` (currentMode)
     - `0b0000001` (ConcurrentMode)
     - 结果：`0b0000001`，非零，表示 `ConcurrentMode` 被启用。

### 结论

按位或操作符通过将每个位进行逻辑或运算，可以同时启用多个模式。按位与操作符则用于检查某个模式是否被启用。通过这种位操作，React 可以高效地管理和组合多个模式标志，确保在一个整数中存储和操作多个独立的标志位。这种设计在处理多个布尔标志或状态时非常高效和直观。